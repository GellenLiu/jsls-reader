webpackJsonp([2],{Vpl0:function(t,e){},gpVb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),i=n.n(o),s=n("mvHQ"),a=n.n(s),l=n("SJI6"),c={data:function(){return{num:0,tittle:"我的书架",fileList:["filetxt1","filetest2"],text:"text",novelName:"",loading:!1,finished:!1}},mounted:function(){this.init()},methods:{testVuex:function(){this.$store.commit("SET_NUM",1),console.log(this.$store.state.number)},init:function(){if(null===JSON.parse(localStorage.getItem("fileList"))){localStorage.setItem("fileList",a()(["test1","test2"]))}else this.fileList=JSON.parse(localStorage.getItem("fileList")),console.log("init fileLIst"),console.log(this.fileList)},onLoad:function(){this.finished=!0},plusReady:function(){plus.webview.currentWebview();console.log("hello plus")},reading:function(t){sessionStorage.setItem("reading",t),this.$router.togo("/Home/reading")},importBook:function(){console.log("improt book")},afterRead:function(t){console.log(t),console.log(this.fileList)},txtbtn:function(){console.log("txtbtn click"),document.getElementById("txt").click()},loadTextFromFile:function(t){var e=this;console.log("loadText click");var n=t.target.files[0];if(console.log(n.value),"txt"===n.name.split(".").splice(-1).toString()){var o=[];o=JSON.parse(localStorage.getItem("fileList")),console.log("addfile打印"),console.log(o),o.push(n.name),localStorage.setItem("fileList",a()(o)),localStorage.setItem("reading",n.name);var i=new FileReader;"undefined"==typeof FileReader&&alert("您的浏览器不支持FileReader接口"),i.onload=function(t){console.log("导入成功");for(var o=t.target.result.split(/([第][一二三四五六七八九十百千0-9]{1,8}[章][^\\n]{1,15}[\n|\s|\r])/g),i=[],s=o.length,l=1;l<s-1;l+=2)i.push(o[l]),e.storegeDB(o[l],o[l+1]);localStorage.setItem(n.name+"chapterList",a()(i)),this.$toast("导入成功")},i.readAsText(n,"utf-8")}else this.$message.success("文件类型错误,请重新选择文件")},add:function(t,e,n){var o=t.transaction(["chapter"],"readwrite").objectStore("chapter").add({chapterName:e,content:n});o.onsuccess=function(t){console.log("数据写入成功")},o.onerror=function(t){console.log("数据写入失败")}},read:function(t,e){var n=t.transaction(["chapter"]).objectStore("chapter").get(e);n.onerror=function(t){console.log("事务失败")},n.onsuccess=function(t){n.result||console.log("未获得数据记录")}},storegeDB:function(t,e){var n,o,i=this,s=indexedDB.open("MyindexedDB",1);s.onerror=function(t){console.log("error")},s.onsuccess=function(o){console.log("success"),n=s.result,i.add(n,t,e)},s.onupgradeneeded=function(t){n=t.target.result,console.log("更新数据库"),n.objectStoreNames.contains("chapter")||(o=n.createObjectStore("chapter",{keyPath:"chapterName"})),o.createIndex("chapterName","chapterName",{unique:!0})}},showNovelList:function(){}},components:{commonHeader:n("fqE/").a},computed:i()({},Object(l.mapGetters)(["number"]),Object(l.mapState)({number:function(t){return t.home.number}})),created:function(){window.plus?this.plusReady():document.addEventListener("plusready",this.plusReady,!1),this.init()}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-box"},[n("common-header",{attrs:{tittle:t.tittle,showback:!1}}),t._v(" "),n("div",{staticClass:"page-content"},[n("div",[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.fileList,function(e){return n("van-swipe-cell",{key:e,staticClass:"vancell",attrs:{title:e,"right-width":"65"}},[n("van-card",{staticClass:"goods-card",attrs:{num:"",price:"更新至xxx",desc:"简介:七城战乱，邪神复苏的阴影笼罩在赤色大陆上空，家族争斗，对抗怪物，阶级跨越，人类一切的阴谋与仇恨，皆指向永夜传说，指向人与时间的诅咒。",title:e,thumb:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fi-1.edowning.net%2F2021%2F1%2F23%2F61ccdfbd-a6f2-490f-97c2-c39cadd94657.jpg&refer=http%3A%2F%2Fi-1.edowning.net&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1615172546&t=3759087eb7a7c328c3d25e9c2f1c8f28"},on:{click:function(n){t.reading(e)}}}),t._v(" "),n("template",{slot:"right"},[n("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"}})],1)],2)}))],1),t._v(" "),n("van-button",{attrs:{round:"",type:"info",id:"loadtxtbtn"},on:{click:t.txtbtn}},[t._v("导入")]),t._v(" "),n("input",{ref:"loadtxt",staticStyle:{display:"none"},attrs:{type:"file",id:"txt"},on:{change:t.loadTextFromFile}}),t._v(" "),n("div",[t._v(t._s(t.text))])],1),t._v(" "),n("div")],1)},staticRenderFns:[]};var d=n("VU/8")(c,r,!1,function(t){n("Vpl0")},"data-v-5e7ad35a",null);e.default=d.exports},mvHQ:function(t,e,n){t.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(t,e,n){var o=n("FeBl"),i=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}}});
//# sourceMappingURL=2.540d6a0b17484f82c045.js.map